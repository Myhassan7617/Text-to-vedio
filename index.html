<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Text to Video</title>
    
    <style>
        /* General Setup */
        :root {
            --color-bg: #121212;
            --color-surface: #1e1e1e;
            --color-primary: #0d6efd;
            --color-primary-dark: #0a58ca;
            --color-text: #e0e0e0;
            --color-text-secondary: #aaaaaa;
            --color-border: #333333;
            --color-error: #ff6b6b;
            --border-radius: 8px;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background-color: var(--color-bg);
            color: var(--color-text);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 1rem;
        }

        /* Main Application Container */
        main {
            width: 100%;
            max-width: 600px;
            background-color: var(--color-surface);
            border-radius: var(--border-radius);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
            padding: 2rem;
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }

        /* Header */
        h1 {
            text-align: center;
            color: white;
            font-weight: 600;
        }

        /* Prompt Input Area */
        .prompt-section {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        #prompt-input {
            width: 100%;
            min-height: 100px;
            padding: 0.75rem;
            font-size: 1rem;
            font-family: inherit;
            background-color: var(--color-bg);
            color: var(--color-text);
            border: 1px solid var(--color-border);
            border-radius: var(--border-radius);
            resize: vertical;
            line-height: 1.5;
        }

        #prompt-input:focus {
            outline: none;
            border-color: var(--color-primary);
            box-shadow: 0 0 0 3px rgba(13, 110, 253, 0.25);
        }

        /* Generate Button */
        #generate-btn {
            padding: 0.75rem 1.5rem;
            font-size: 1rem;
            font-weight: 600;
            color: #ffffff;
            background-color: var(--color-primary);
            border: none;
            border-radius: var(--border-radius);
            cursor: pointer;
            transition: background-color 0.2s ease;
        }

        #generate-btn:hover:not(:disabled) {
            background-color: var(--color-primary-dark);
        }

        #generate-btn:disabled {
            background-color: #555;
            cursor: not-allowed;
        }

        /* Results Area (Loader, Error, Video) */
        .result-section {
            width: 100%;
            min-height: 200px; /* Reserve space */
            display: flex;
            justify-content: center;
            align-items: center;
            background-color: var(--color-bg);
            border: 1px dashed var(--color-border);
            border-radius: var(--border-radius);
            padding: 1rem;
        }

        /* Loading Spinner */
        .loader {
            width: 48px;
            height: 48px;
            border: 5px solid var(--color-text-secondary);
            border-bottom-color: var(--color-primary);
            border-radius: 50%;
            display: inline-block;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Video Player */
        #video-container video {
            width: 100%;
            max-width: 100%;
            border-radius: var(--border-radius);
            background-color: #000;
        }

        /* Error Message */
        #error-message {
            color: var(--color-error);
            font-weight: 500;
            text-align: center;
        }
        
        /* Utility Class */
        .hidden {
            display: none !important;
        }
    </style>
</head>
<body>

    <main>
        <h1>AI Text to Video Generator</h1>

        <section class="prompt-section">
            <textarea id="prompt-input" placeholder="Enter a creative prompt... (e.g., 'a cinematic shot of a robot walking in the rain')"></textarea>
            <button id="generate-btn">Generate Video</button>
        </section>

        <section class="result-section">
            <div id="loader" class="loader hidden"></div>
            <div id="video-container"></div>
            <p id="error-message" class="hidden"></p>
        </section>
    </main>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            
            // --- Configuration ---

            // !! WARNING: Do NOT expose your API key in client-side code for a real application.
            // This is for demonstration only. A real app should use a backend server
            // to securely manage and use the API key.
            const API_KEY = 'key_ea05f66d0d534ba823b589a866782fbbc516979abacdf7d7026c3a31bca8a988b6857de4ed0e0b013eb2d9c69f06678abbb7faa7c828d1c658f94e5f9b81afa7';
            
            // This is a placeholder URL. Replace with the actual RunwayML Gen-2 API endpoint.
            const API_ENDPOINT = 'https://api.runwayml.com/v1/gen2/video'; 
            
            // Note: The actual RunwayML API is asynchronous.
            // 1. You POST to start a generation (gets a task ID).
            // 2. You GET (poll) the task endpoint until its status is 'succeeded'.
            // 3. The 'succeeded' response contains the video URL.
            //
            // For this exercise, we will *simulate* a simple, single request-response
            // as implied by the prompt, where the API immediately returns the video URL.
            // This will NOT work with the real Runway API without modification.
            
            // --- DOM Elements ---
            const generateBtn = document.getElementById('generate-btn');
            const promptInput = document.getElementById('prompt-input');
            const loader = document.getElementById('loader');
            const videoContainer = document.getElementById('video-container');
            const errorMessage = document.getElementById('error-message');

            // --- Event Listeners ---
            generateBtn.addEventListener('click', handleVideoGeneration);

            // --- Functions ---

            /**
             * Main function to handle the "Generate Video" button click.
             */
            async function handleVideoGeneration() {
                const prompt = promptInput.value.trim();

                // 1. Validate Input
                if (!prompt) {
                    showError('Please enter a prompt.');
                    return;
                }

                // 2. Set UI to Loading State
                setLoadingState(true);
                clearResults();

                try {
                    // 3. Prepare API Request
                    const requestOptions = {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                            'Authorization': `Bearer ${API_KEY}`
                        },
                        body: JSON.stringify({
                            prompt: prompt,
                            // Add other Gen-2 parameters as needed, e.g.:
                            // "width": 1024,
                            // "height": 576,
                            // "seed": 42
                        })
                    };

                    // 4. Call the API
                    // In a real scenario, this first call would just start the job.
                    const response = await fetch(API_ENDPOINT, requestOptions);

                    if (!response.ok) {
                        const errorData = await response.json();
                        throw new Error(errorData.message || `API Error: ${response.status}`);
                    }

                    const data = await response.json();

                    // 5. Display Results
                    // We assume 'data.url' holds the video URL per the prompt's simple flow.
                    // The real API would require polling a different endpoint using 'data.task_id'.
                    if (data.url) {
                        displayVideo(data.url);
                    } else {
                        // This will trigger if the simplified flow is used on the real async API
                        showError('API did not return a video URL directly. (Note: Real API is async)');
                        console.warn('Received data, but no direct URL:', data);
                    }

                } catch (error) {
                    console.error('Generation Error:', error);
                    showError(error.message || 'An unknown error occurred.');
                } finally {
                    // 6. Restore UI from Loading State
                    setLoadingState(false);
                }
            }

            /**
             * Updates the UI to show/hide the loader and disable/enable the button.
             * @param {boolean} isLoading - True to show loader, false to hide.
             */
            function setLoadingState(isLoading) {
                if (isLoading) {
                    loader.classList.remove('hidden');
                    generateBtn.disabled = true;
                } else {
                    loader.classList.add('hidden');
                    generateBtn.disabled = false;
                }
            }

            /**
             * Clears any previous video or error messages.
             */
            function clearResults() {
                videoContainer.innerHTML = '';
                errorMessage.classList.add('hidden');
                errorMessage.textContent = '';
            }

            /**
             * Creates and embeds a video player for the given URL.
             * @param {string} url - The URL of the generated video.
             */
            function displayVideo(url) {
                const videoElement = document.createElement('video');
                videoElement.src = url;
                videoElement.controls = true;
                videoElement.autoplay = true;
                videoElement.muted = true; // Autoplay often requires mute
                videoElement.playsInline = true;
                
                videoContainer.appendChild(videoElement);
            }

            /**
             * Displays an error message to the user.
             * @param {string} message - The error message to show.
             */
            function showError(message) {
                errorMessage.textContent = message;
                errorMessage.classList.remove('hidden');
            }
        });
    </script>
</body>
</html>